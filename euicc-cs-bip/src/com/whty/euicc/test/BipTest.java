package com.whty.euicc.test;

import com.whty.euicc.impl.SMSPP_MT;
import com.whty.euicc.tls.AnalyseUtils;
import com.whty.euicc.tls.BipUtils;

public class BipTest {

	public static void main(String[] args) throws Exception {
      //与虚拟卡的测试
//		//1、服务器下发SMs触发短信，初始化生成channelNumber，调用SMSPP_MT里的方法 分包封装，下发给卡，卡返回OpenChannel的命令，解析其中的缓存区，与服务器建立ip连接，并响应终端
//		PCSInterface5java pcs = new PCSInterface5java();
//		pcs.CardInterface();//连接复位初始化
//		
//		String str = "7FD17D82028381860891683108100005F08B6D400881015608057FF6204080115352005C0270000057151201121200000100000000030091463A961B493979813F833D86070000A50300001E89328A0A3137322E39362E302E318B0A303132333435363738398C182F7365727665722F61646D696E6167656E743F636D643D31";
//		SMSPP_MT sms = new SMSPP_MT();
//		sms.Sms_mt(str);
		
		//PCSInterface5java pcs =new PCSInterface5java();
		BipUtils.channel_number = AnalyseUtils.randi(7);
		BipUtils.Channel_number = AnalyseUtils.itoa(BipUtils.channel_number+0x20, 1);
		//初始化生成Channelnumber
		//pcs.CardInterface();
		SMSPP_MT.Sms_mt("02700000281516011212000013E21DB05290EDC4EA3800F76060B534F9FF993D60FD1D0835048ABA84997DA24A");
//		SMSPP_MT.Sms_mt("027000006815160112120000016F163F2F3F0E3972CD922CBA9C8734C5BEED160A0B6F2949A41477BC7E24596679156D64B876D889A98A674857B4A47E96D6EDA2D9D2186EF236671B91E0E020F7175A6FC9BB517C53FEA0ACFCD0E18FBCFF56A01E8476A6B563058E8624D2CB");
//		SMSPP_MT.Sms_mt("027000004815160112120000018A0A68071D03CDC0231F7ECEF323E35C6ECF85EC0CB907E9CAA9BEA4D505632BFC59E3D404620617642F8278499A73B2DD19893533ADAE9E1F6DFB4A5D67F45E");
		//sms.Sms_mt("02700000621512011212000001000000000700B5E0D4D319615E42814A834884370500EE0222B8EF0200C83501033902058E471508696E7465726E6574076974656C63656C03636F6D3C030220FB2401FF3E05210A08288C890D8A0B31302E382E34302E313430");
		 //sms.Sms_mt("02700000321512011212000001000000000500C386B44F537EC3A6811A831886070000A50300001E890D8A0B31302E382E34302E313430");
//		//0348下发以及clienthello完成，现在开始 serverhello了   80C2000010D60E99010982028281B8028600B70136
	/*	
		//serverHello
		String a = "16030300310200002D030355555555555555555555555555555555555555555555555555555555555555550000AE0000050001000102";
		//16030300310200002d030355555555555555555555555555555555555555555555555555555555555555550000AE0000050001000102
		BipUtils.recievedataOKClosetimer(a);
		
		//ServerHelloDone ---D060810301430182028122B65516030300501000004C004A30313031303131303041383935323032303031393837363534333231313836313134443930303439413846464439384334343041373638373046324642373034323436373632344445449000
		String serverHelloDone = "16030300040E000000";
		BipUtils.recievedataOKClosetimer(serverHelloDone);
		
		//change_cipher_spec消息
		String change_ciper_spec = "140303000101";
		BipUtils.recievedataOKClosetimer(change_ciper_spec);//D00C810301420082028126B701069000
	    	                                                         //D00C810301420082028124B701069000
	   //finished
		String S_FinishStr = "160303005000010203040506070809AABBCCDDEEFF88D375DBDA417D0E81753D978FB9E00BE7C4E135BFAF10260E73EF66DA04450BC11B28C27E462B7BE3C3DF2F6F14839E6DF7865F2DC87B06848858C5C577B9A9";
		BipUtils.recievedataOKClosetimer( S_FinishStr);
		//D0 81 D1 81 03 01 43 01 82 02 81 22 B6 81 C5 17 03 03 00 C0 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F 67 70 55 E2 5A 13 5D BB 6F E6 45 62 A3 84 39 00 4C 13 4C 67 FE 22 05 9C FC 24 9B B8 C1 E9 25 45 4A 9C 4A EC 34 74 E9 8A 4A 46 72 CC 1A E1 4F FE 3F 64 38 47 BB FA FE 21 EB DD 53 14 5F 4A 59 F5 2E FD B8 EA 8B C2 53 E7 11 19 39 AA 79 8F 7C D3 86 54 B7 B1 4B 79 21 05 74 79 39 E9 33 E0 B6 8C 50 61 7B E6 4E 51 EC E3 28 7A 16 A1 23 EE C5 F5 1D 91 0E 9D F1 44 3A E3 48 53 DD 83 8F 76 28 84 48 91 6B 16 D3 8A 44 EC 24 D1 D5 C0 8C B5 AD BD 5F 52 A7 04 5E 4A 95 EE 9D 0C 51 01 61 A8 E5 2B 2D ED E0 0B 71 8A A1 09 05 B2 6A 24 6E 0F 61 26 9000
	    //D0 81 D1 81 03 01 43 01 82 02 81 24 B6 81 C5 17030300C0000102030405060708090A0B0C0D0E0F677055E25A135DBB6FE64562A38439004C134C67FE22059CFC249BB8C1E925454A9C4AEC3474E98A4A4672CC1AE14FFE3F643847BBFAFE21EBDD53145F4A59F52EFDB8EA8BC253E7111939AA798F7CD38654B7B14B792105747939E933E0B68C50617BE64E51ECE3287A16A123EEC5F51D910E9DF1443AE34853DD838F76288448916B16D38A44EC24D1D5C08CB5ADBD5F52A7045E4A95EE9D0C510161A8E52B2DEDE00B718AA10905B26A246E0F61269000
	
	  //安装应用、
		String Install_Str = "170303018000010203040506070809AABBCCDDEEFFC88C791855C1996407FB11A073B073E8617A14409ACD56E96A867D4315C613735967252FC2CE9A1B5F829BF25996A278393CD98BFCAD8272FB4472DB74496619B8221E5B5A83CAE77BDB7B31112A7009F21F9927BBD92E8B6039A225D98B8253BD0A31F2ED65559BBF9E86D192CF401DD7A1497808BAAF30F1E25CC3CC4D3EA6B251256284303FB195FB2A06BD3E8A0BCDFF3358EDB9BB5A1606E7B3FFC43B26C1E639CC6AB3259B4DECB863E6AD51949228FD617D038E9A3BB041B437ADD86801506714C998E959E4FD32007E9C6268700956C74F78C3D9D1BE88C8358385CD9796320B6EFBDFC15699189DED12F95D4B51B878CD27B880051038719A00CE22F10EF66CF062A9D718AFA2F4A6EE1D8D035DCCB1C11AC1F9984CC283C44764BC89CE90A7A51B3920DAB98F07A201AE83A71D5BF468A774D1BA84AFBC221E5473C2DD5E41B8D03FED7E44B1A10AA87DE9598BA29EC7E335BD23D0431AE3C6450DC3025A04CBAA64DD2B22D44C28F8763D";
		BipUtils.recievedataOKClosetimer( Install_Str);
		
	 //下发profile数据
		String profile = "17030301e000010203040506070809AABBCCDDEEFFC88C791855C1996407FB11A073B073E8617A14409ACD56E96A867D4315C613735967252FC2CE9A1B5F829BF25996A278393CD98BFCAD8272FB4472DB74496619B8221E5B5A83CAE77BDB7B31112A7009F21F9927BBD92E8B6039A225D98B8253BD0A31F2ED65559BBF9E86D192CF401DD7A1497808BAAF30F1E25CC3CC4D3EA6B251256284303FB195FB2A06BD3E8A0BCDFF3358EDB9BB5A1606E7B3FFC43B26C1E639CC6AB3259B4DECB863E6AD51949228FD617D038E9A3BB041B437ADD86801506714C998E959E4FD32007E9C6268700956C74F78C3D9D1BE88C8358385CD9796320B6EFBDFC15699189DED12F95D4B51B878CD27B880051038719A00CE22F10EF66CF062A9D718AFA2F4A6EE1D8D68EEBA39814A773441B0C3336A878CE2C56FF54FB1F36DB3C7BFE59215CB4B1BF9A40774EBF5A3A8C938E83424B70A5E586A5391C88CD115AE145E17C40D52A0979BC4F5FC734364501917BD24E37B7C2AE8F47CD0A8CB69C0FC7BDA0E361C4D5787A99EA36CEBC268852534069A8769666685B32AE79C5A6ADFBE9E775BB8ACF00AF17872F3A681503B8691792843061667C8A98E41322A8FA6292E5AADAF26094590D5C71431DDE7971DF500D9459C4625E835D0BFE1925CD59E0FB7316315";
		BipUtils.recievedataOKClosetimer(profile);
		
	 //结束会话通知
		String over = BipUtils.closeChannel();
		BipUtils.recievedataOKClosetimer( over);
		System.out.println("Bip over");
		

//		String TerminalProfile = "FFFFFFFFFFFF1FFFFF03EEFFFF9FFFEF83FF0FFF0FFFE70F0500003F7F00";
//	    BipUtils.terminalProfile(TerminalProfile);
		//D0 1C 81 03 01 25 00 82028182 850F80005500530049004D53615E9475288F009000
		*/
		
		//String ISd-str = "17030301A02717A35193B8DEAF5A8F0C06469FA55F46D84E1A096BEEF24FE9A2F6AAC10D63B337858077293F4169217BFB19BCF92EB9D304E68AA8FB0DC16FAFF8CDE8F1D47CE0CAF6B78C0882714248544D716BAF25B92791BDD3C39ADD2942581A046B80887B2DA483D2884F2CBCCCD8069E8DC3DBDCABF2001E140107A827C9D3BFF92DD1B6B6B27D1888B924D103A8A4CCC31AF2C3F034F03C5BEE3B049863AF9ED8615ADD3E62A7761611991AF53A6749AA80E62B612BD36D439F8380603908EE00BF23F72F8D5F3DA3B36894B5489E8CE4A9AEDEEDC2A7CE1682171B117979EC54935C2B499C055DFC70E8190C01941E4407A3E0513AFF164A4CF68030D2DEF01CD8EE3D17F93D3ABAA63C32BE11C7E27E4314DB10AC3CDA87490DF9563E132A711D36F05AD60C97B06EA9ED4512880B94A1FF811E660D7BBF4AB051613565FA91F51D376F590F4CA31CBFDB6EE79467CD0D215F27491758F1C7305C8AC05FBCB48DFE68BCE3366E0048302EAA661C8D66AE26219ED15FBC1730D25B9942B2E9AE799B695DE564C3FED641E88CC668BD1EAB7FEC3F78F6AC1CEF1C0F7C0CB5FFB18C";
		
		}

}
